<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</title>
    <link rel="stylesheet" href="../../public/post.css">
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="profile">
                <img src="../../public/user.png" alt="User Avatar" class="avatar">
                <h2>User_1</h2>
            </div>
            <div class="menu">
                <p class="menu-title">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
                <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" class="search-box">
                <button class="new-category-btn">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà</button>
                <ul class="category-list">
                    <li class="active">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î</li>
                    <li>‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</li>
                    <li>‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏±‡∏á‡∏Ñ‡∏°</li>
                    <li>‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß</li>
                    <li>‡∏Å‡∏¥‡∏ô‡πÇ‡∏£‡∏ï‡∏µ‡∏î‡∏µ‡∏™‡πâ‡∏°</li>
                </ul>
            </div>
            <button class="sandbox-btn">SandBox</button>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="post-box">
                <!-- Header -->
                <div class="post-header">
                    <div class="user-info">
                        <img src="../../public/user.png" class="post-avatar" alt="User Avatar">
                        <div>
                            <h3>John Talkit</h3>
                            <select class="category-dropdown">
                                <option value="‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î üêç</option>
                                <option value="‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï üí≠</option>
                                <option value="‡∏õ‡∏±‡∏ç‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏±‡∏á‡∏Ñ‡∏° üåê</option>
                                <option value="‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô">‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß üç¥</option>
                                <option value="‡∏Å‡∏¥‡∏ô‡πÇ‡∏£‡∏ï‡∏µ">‡∏Å‡∏¥‡∏ô‡πÇ‡∏£‡∏ï‡∏µ‡∏î‡∏µ‡∏™‡πâ‡∏° ü•ô</option>
                            </select>
                        </div>
                    </div>
                    <button class="post-btn" onclick="window.location.href='homepage.html'">‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
                </div>

                <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏û‡∏™‡∏ï‡πå -->
                <input type="text" class="post-title" placeholder="‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏û‡∏™‡∏ï‡πå">

                <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å -->
                <div id="postContent">
                    <textarea class="post-text" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå..."></textarea>
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
                <div class="actions">
                    <button class="img-btn">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
                    <button class="code-btn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î</button>
                    <button class="cancel-btn" onclick="window.location.href='homepage.html'">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <input type="file" id="imageInput" accept="image/*" style="display:none">
                </div>
            </div>
        </main>
    </div>

    <!-- Popup modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà</h2>
            <input type="text" id="category-name" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà..." />
            <div class="modal-actions">
                <button class="modal-btn cancel" id="cancel-btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="modal-btn" id="save-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <script>
        const postContent = document.getElementById('postContent');
        const codeBtn = document.querySelector('.code-btn');
        const imgBtn = document.querySelector('.img-btn');
        const imageInput = document.getElementById('imageInput');

        /* ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á textarea ‡πÉ‡∏´‡∏°‡πà */
        function createTextArea() {
            const textarea = document.createElement('textarea');
            textarea.classList.add('post-text');
            textarea.placeholder = "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå...";
            return textarea;
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° code block ‡πÅ‡∏¢‡∏Å container */
        codeBtn.addEventListener('click', () => {
            const postItem = document.createElement('div');
            postItem.classList.add('post-item');

            const codeBlock = document.createElement('div');
            codeBlock.classList.add('code-block');
            codeBlock.innerHTML = `
        <button class="close-btn">&times;</button>
        <div class="code-header">Python</div>
        <textarea class="code-content" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
        <div class="code-footer">
            <span>Result:</span>
            <button class="run-btn">Run</button>
        </div>
    `;

            codeBlock.querySelector('.close-btn').addEventListener('click', () => postItem.remove());

            postItem.appendChild(codeBlock);
            postItem.appendChild(createTextArea()); // textarea ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢

            postContent.appendChild(postItem);
            postItem.scrollIntoView({ behavior: 'smooth' });
        });

        /* ‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏¢‡∏Å container */
        imgBtn.addEventListener('click', () => imageInput.click());

        imageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (event) {
                const postItem = document.createElement('div');
                postItem.classList.add('post-item');

                const wrapper = document.createElement('div');
                wrapper.classList.add('image-wrapper');
                wrapper.innerHTML = `
            <button class="close-btn">&times;</button>
            <img src="${event.target.result}" alt="Preview Image">
        `;

                wrapper.querySelector('.close-btn').addEventListener('click', () => postItem.remove());

                // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ
                const img = wrapper.querySelector('img');
                img.style.maxWidth = "100%";
                img.style.maxHeight = "250px";
                img.style.borderRadius = "8px";
                wrapper.style.border = "1px solid #007bff";
                wrapper.style.padding = "8px";
                wrapper.style.marginBottom = "10px";
                wrapper.style.position = "relative";

                postItem.appendChild(wrapper);
                postItem.appendChild(createTextArea());

                postContent.appendChild(postItem);
                postItem.scrollIntoView({ behavior: 'smooth' });
            };
            reader.readAsDataURL(file);
            imageInput.value = "";
        });

        document.querySelector('.sidebar .avatar').addEventListener('click', () => {
            window.location.href = 'profile.html';
        });


        // ‡πÄ‡∏õ‡∏¥‡∏î popup
        const modal = document.getElementById("modal-overlay");
        document.querySelector(".new-category-btn").addEventListener("click", () => {
            modal.style.display = "flex";
            document.getElementById("category-name").focus();
        });

        // ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        document.getElementById("cancel-btn").addEventListener("click", () => {
            modal.style.display = "none";
            document.getElementById("category-name").value = "";
        });

        // ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
        document.getElementById("save-btn").addEventListener("click", () => {
            const name = document.getElementById("category-name").value.trim();
            if (name) {
                const ul = document.querySelector(".category-list");
                const li = document.createElement("li");
                li.textContent = name;
                ul.appendChild(li);
                document.getElementById("category-name").value = "";
                modal.style.display = "none";
            }
        });
    </script>
</body>

</html>